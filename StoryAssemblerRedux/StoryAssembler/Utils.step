RunStory ?frag:
    [StoryAssembler ?]
    # [Paragraph]
    # [StoryAssembler ?]
    # [Paragraph]
    # [StoryAssembler ?]
    # [Paragraph]
    # [StoryAssembler ?]
    # [Paragraph]
    # [StoryAssembler ?]
    # [Paragraph]
[end]

RunStoryWrap: [RunStory ?frag]

# Custom max check
[predicate]
MaxOf ?x ?y ?max: [< ?x ?y] [set ?max = ?y]
MaxOf ?x ?y ?max: [set ?max = ?x]

T: 
    [set CurrentScene = test]
    [InitScene ^CurrentScene]
    Testing: ^CurrentScene
    [Paragraph]
    [BestPath ?bf ?s]
    [Paragraph]
    Best Path: ?bf Score: r?s
[end]

R:
    [set CurrentScene = test]
    [InitScene ^CurrentScene]
    Testing: ^CurrentScene
    [AvailableUnexploredFragment ?frag ^CurrentScene]
[end]

TestAllSatisfiableChoices:
    [set CurrentScene = test]
    [InitScene ^CurrentScene]
    [DoAll [AllSatisfiableChoices ?frag ?list] [Write ?frag ][Write ?list]]
[end]

initially:
    [set ^CurrentScene = test]
[end]

